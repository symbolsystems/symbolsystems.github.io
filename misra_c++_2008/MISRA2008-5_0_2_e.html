<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Limited dependence should be placed on C++ operator precedence rules in expressions [MISRA2008-5_0_2_e]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Limited dependence should be placed on C++ operator precedence rules in expressions [MISRA2008-5_0_2_e-4]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"In addition to the use of parentheses to override default operator precedence,
parentheses should also be used to emphasise it. It is easy to make a mistake 
with the rather complicated precedence rules of C, and this approach helps to 
avoid such errors, and helps to make the code easier to read. However, do not 
add too many parentheses so as to clutter the code and make it unreadable.
Use parentheses unless all operators in the expression are the same."
[MISRA-C:2004]

The rule reports a violation if a non-parenthesized binary operator is used
as the operand of another binary or ternary operator. The rule does not report
violations if an operator is a function (operator function in C++).  
The operands of a logical &amp;&amp; and || are checked by the rule MISRA2004-12_5.

See also: MISRA2004-12_5, CODSTA-90



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

"Even if all operators are the same, parentheses may be used to control
the order of operation. Some operators (e.g. addition and multiplication)
that are associative in algebra are not necessarily associative in C++. 
Similarly, integer operations involving mixed types (prohibited by several
rules) may produce different results because of the integral promotions."
[MISRA C++:2008]



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Rule improves readability and maintainability.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

void foo(int p1, int p2) {
    int a = p1 * p2 + 1;     // Violation
    if(p1 + p2 != p1 - p2);  // Violation
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

void foo(int p1, int p2) {
    int a = p1 * (p2 + 1);       // OK
    if((p1 + p2) != (p1 - p2));  // OK
}

// Examples not reported by rule
void foo2(int p1, int p2) {
    int a = p1 * -p2;       // OK - operand of a unary operator
    a = p1 + p2 + 1;        // OK - the same operators in expression
    
    if(p1 == 1 &amp;&amp; p2 &gt; 1 ); // OK - reported by MISRA2004-12_5
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. AUTOSAR C++14 Coding Guidelines
   M5-0-2. Limited dependence should be placed on C++ operator precedence
   rules in expressions

2. High Integrity C++ Coding Standard
   5.1.3. Use parentheses in expressions to specify the intent of the
   expression

3. MISRA C++:2008 Guidelines for the use of the C++ language in critical
   systems, Chapter 6, Section 5, Rule 5-0-2

4. MISRA-C:2004 Guidelines for the use of the C language in critical systems
   Chapter 6, Section 12, Rule 12.1

5. Origin: Misra Guidelines - Rule 47

</PRE>
</BODY>
</HTML>
