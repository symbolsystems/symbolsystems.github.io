<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Only use std::unique lock when std::lock guard cannot be used [HICPP-18_3_4-a]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Only use std::unique lock when std::lock guard cannot be used [HICPP-18_3_4-a-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"The std::unique_lock type provides additional features not available in
std::lock_guard. There is an additional cost when using std::unique_lock
and so it should only be used if the additional functionality is required."
[HIC++ v4.0, Rule 18.3.4]



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v10.4



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Improves code quality and eliminates unnecessary overhead.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

#include &lt;cstdint&gt;
#include &lt;mutex&gt;

void f1(int32_t val) {
    static std::mutex mut;
    std::unique_lock&lt;std::mutex&gt; lock(mut); // Violation
    // ...
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

#include &lt;cstdint&gt;
#include &lt;mutex&gt;

void f1(int32_t val) {
    static std::mutex mut;
    std::lock_guard&lt;std::mutex&gt; lock(mut); // OK
    // ...
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. High Integrity C++ Coding Standard
   18.3.4. Only use std::unique lock when std::lock guard cannot be used

</PRE>
</BODY>
</HTML>
