<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
The left-hand operand of a right-shift operator shall not have a negative value [JSF-164.1]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
The left-hand operand of a right-shift operator shall not have a negative value [JSF-164.1-2]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

The rule reports a violation message if as left-hand operand of right-shift
operator is used one from the following options:
- constant with a negative value
- unary operator '-' followed by parameter, variable or expression
- parameter or variable of signed type
- expression of signed type that contains parameter, variable, dereferenced
  pointer or function call of signed type



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v7.1



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Rule prevents implementation-defined behaviours.
"For e1 &gt;&gt; e2, if e1 has a signed type and a negative value, the value
of (e1 &gt;&gt; e2) is implementation-defined."



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

void foo(signed int signed_param)
{
    signed int signed_variable;
    int variable;
    signed int* ptr_signed_variable;

    signed_param &gt;&gt; 5;         // Violation
    signed_variable &gt;&gt; 5;      // Violation
    -variable &gt;&gt; 5;            // Violation
    -100 &gt;&gt; 5;                 // Violation
    -100u &gt;&gt; 5;                // Violation
    *ptr_signed_variable &gt;&gt; 5; // Violation
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

void foo(unsigned int unsigned_param)
{
    unsigned int unsigned_variable;
    int variable;
    unsigned int* ptr_signed_variable;

    unsigned_param &gt;&gt; 5;         // OK
    unsigned_variable &gt;&gt; 5;      // OK
    (unsigned int)variable &gt;&gt; 5; // OK
    100 &gt;&gt; 5;                    // OK
    100u &gt;&gt; 5;                   // OK
    *ptr_signed_variable &gt;&gt; 5;   // OK
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. JOINT STRIKE FIGHTER, AIR VEHICLE, C++ CODING STANDARDS
   Chapter 4.21 Operators, AV Rule 164.1

2. General Principles of Software Validation;
   Final Guidance for Industry and FDA Staff
   Document issued on: January 11, 2002

3. MISRA C:2012 Guidelines for the use of the C language in critical systems
   Section 8: Rules, Rule 1.3

</PRE>
</BODY>
</HTML>
