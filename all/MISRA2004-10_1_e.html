<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Avoid implicit conversions of function return expressions [MISRA2004-10_1_e]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Avoid implicit conversions of function return expressions [MISRA2004-10_1_e-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"The value of an expression of integer type shall not be implicitly
converted to a different underlying type if the expression is not constant
and is a return expression.
The term 'underlying type' is defined as describing the type that would
be obtained from evaluating an expression if it were not for the effects
of integral promotion.
Integral promotion describes a process whereby arithmetic operations are
always conducted on integer operands of type int or long (signed or unsigned).
Operands of any other integer type, (char, short, bit-field and enum) are
always converted to type int or unsigned int before an arithmetic operation."
Rule checks if implicit conversions of function return expressions are used.



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v7.0



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

"By observing the principle whereby all operations are performed in 
a consistent (underlying) type, it is possible to avoid programmer confusion
and some of the dangers associated with integral promotion."



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

unsigned int Conv_ret1( signed char a )
{
    return a;                            /* Violation */
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

unsigned int Conv_ret1( signed char a )
{
    return (unsigned int)a;              /* OK */
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. MISRA-C:2004 Guidelines for the use of the C language in critical systems
   Chapter 6, Section 10

2. ISO/DIS 26262
   point 8.4.4

</PRE>
</BODY>
</HTML>
