<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
The conditional operator should not be used as a sub-expression [HICPP-5_8_1-a]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
The conditional operator should not be used as a sub-expression [HICPP-5_8_1-a-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"Using the result of the ternary conditional operator as an operand or nesting
conditional operators makes the code less readable and more difficult
to maintain." [AUTOSAR A5-16-1]

This rule detects when the conditional operator is used in a context other than:
- by itself
- argument in a function call
- return expression
- initializer in a member initialization list
- object initializer
- right-hand side operand of assignment



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

2022.1



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

This rule detects when a conditional operator is used in an improper context,
even if it comes from a macro expansion.

#define COND1(p1, p2, p3) (p1 &gt; 0) ? p2 : p3

void f1(int i)
{
    int x1 = (COND1(i, 0, 1)) + 1;     // Violation
}



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

This rule helps you to improve the readability and maintainability of the code.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

int f1();
int f2();

int func(int i)
{
    int x1 = (i &gt; 0) ? (i &lt; 10) ? f1() : f2() : f2();  // Violation
    return x1;
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

int f1();
int f2();

void func(int i)
{
    int x1 = 0;
    if(i &gt; 0) {
        x1 = (i &lt; 10) ? f1() : f2();  // OK
    } else {
        x1 = f2();
    }
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. AUTOSAR C++14 Coding Guidelines
   A5-16-1. The ternary conditional operator shall not be used as a sub-expression

2. High Integrity C++ Coding Standard
   5.8.1. Do not use the conditional operator (?:) as a sub-expression

</PRE>
</BODY>
</HTML>
