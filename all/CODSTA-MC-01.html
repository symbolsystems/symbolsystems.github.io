<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
The 'alignof' operator should not be used with an array type as its operand [CODSTA-MC-01]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
The 'alignof' operator should not be used with an array type as its operand [CODSTA-MC-01-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"When 'alignof' is applied to an array type, the result is the alignment
of the element type." [ISO/IEC 14882:2017]

Since the type of the array does not affect the value of the result
of the 'alignof' operator, its explicit use in the operand
might cause confusion.

This rule detects when an array type is used as the operand of the 'alignof'
operator.



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

2022.2



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

This rule assumes that the 'alignof' operator is the standard operator
'alignof' or '_Alignof', or a macro that expands into one of them.



</PRE>
<STRONG>
EXCEPTIONS
</STRONG>
<PRE>

This rule allows to use a typedef of an array type as the operand of the
'alignof' operator.



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

This rule helps you to prevent confusion and avoid mistakes.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

#include &lt;stdalign.h&gt;

alignas( alignof(int[10]) ) int i;       // Violation



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

#include &lt;stdalign.h&gt;

alignas( alignof(int) ) int i;           // OK



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. Programming languages -- C++ ISO/IEC 14882:2017
   8.3.6 Alignof

</PRE>
</BODY>
</HTML>
