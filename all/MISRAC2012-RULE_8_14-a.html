<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
The restrict type qualifier shall not be used [MISRAC2012-RULE_8_14-a]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
The restrict type qualifier shall not be used [MISRAC2012-RULE_8_14-a-2]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"When used with care the restrict type qualifier may improve the efficiency
of code generated by a compiler. It may also allow improved static analysis.
However, to use the restrict type qualifier the programmer must be sure that
the memory areas operated on by two or more pointers do not overlap.
There is a significant risk that a compiler will generate code that does not
behave as expected if restrict is used incorrectly."

The rule reports a violation on each use of 'restrict' type qualifier in code. 
Any compiler extensions (e.g. __restrict) are not reported.

The rule is enabled only for C language (C++ standard does not define 'restrict'
type qualifier).



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v9.5



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

The 'restrict' type qualifier is defined only in C99 standard. 
In C90 or earier standards (or standards which do not define 'restrict'
type qualifier) it's dangerous to use it because if you compile the code with
C99, then this code is invalid.



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

The rule prevents undefined behaviours.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

/* The code is compilable with compilers which support
   the 'restrict' type qualifier */
typedef int* restrict INT_R;     /* Violation */
INT_R var1;                      /* OK - Violation on typedef declaration */
void foo(void* restrict p){}     /* Violation */

/* If 'restrict' is not a type qualifier (C90) this defines a variable */
  int restrict = 0;              /* Violation */



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

Do not use 'restrict' in code.



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. MISRA C:2012 Guidelines for the use of the C language in critical systems
   Section 8: Rules, Rule 8.14

2. ISO/IEC 9899:1999 Programming languages -- C
   6.7.3.1 Formal definition of restrict

3. SEI CERT C Coding Standard
   EXP43-C. Avoid undefined behavior when using restrict-qualified pointers
   <A HREF="https://wiki.sei.cmu.edu/confluence/display/c/EXP43-C.+Avoid+undefined+behavior+when+using+restrict-qualified+pointers">https://wiki.sei.cmu.edu/confluence/display/c/EXP43-C.+Avoid+undefined+behavior+when+using+restrict-qualified+pointers</A>

</PRE>
</BODY>
</HTML>
