<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Use class types or typedefs to abstract scalar quantities and standard integer types [HICPP-7_1_6-b]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Use class types or typedefs to abstract scalar quantities and standard integer types [HICPP-7_1_6-b-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

According to MISRA C:2004 Rule 6.3, you should use specific-length typedefs
instead of the basic numerical types of the following signed and unsigned
variants:

	char
	int
	short
	long and float
	double

This rule reports a violation if any of the following types are used directly:

        float, double, long double
        short, int, long, long long
        signed char, unsigned char

For "char" type, only explicitly signed or explicitly unsigned char type are
checked (plain char is not checked).

See also: MISRA2004-6_3, CODSTA-155



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v10.4



</PRE>
<STRONG>
EXCEPTIONS
</STRONG>
<PRE>

Rule does not report a violation for:
- "main" function return type and parameters
- "extern" declaration
- bit-fields



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Clarifies the storage size of scalar quantities and integer types.



</PRE>
<STRONG>
DRAWBACKS
</STRONG>
<PRE>

A false positive may be reported if a macro is used to declare typedef. Example:
    #define DEFINE_TYPE(name, type, bitsize) typedef type name ## bitsize
    DEFINE_TYPE(uint, unsigned int, 32); /* False Positive reported */



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

/* Example */
static signed char a; /* Violation - no typedef */

short int foo(                /* Violation (for return type) */
              short *v_short, /* Violation */
              float &amp;r_float) /* Violation */
{
    double h;        /* Violation */
    const int z = 1; /* Violation */
    return 1;
}

typedef short int *ptr; /* Violation */



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

/* Examples of correct code */
typedef short int s16_t;
typedef double float64;
typedef const int cs32_t;

s16_t foo(                 /* OK */
          s16_t *p_char,   /* OK */
          float64 r_float) /* OK */
{
    float64 h;    /* OK */
    cs32_t z = 1; /* OK */
    return 1;
}

typedef s16_t *ptr; /* OK */

struct STRUCT {
    unsigned int i : 2; /* OK (bit-field) */
};
char ch;                         /* OK (plain char) */
bool b;                          /* OK (boolean type) */
extern signed char a;            /* OK (extern) */
int main(int argc, char *argv[]) /* OK ("main" return type and parameters) */
{
    return 0;
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. High Integrity C++ Coding Standard
   7.1.6. Use class types or typedefs to abstract scalar quantities and
   standard integer types

</PRE>
</BODY>
</HTML>
