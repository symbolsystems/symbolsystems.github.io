<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
A function definition should not be placed in a class specification unless the function is intended to be inlined [CODSTA-CPP-32]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
A function definition should not be placed in a class specification unless the function is intended to be inlined [CODSTA-CPP-32-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"Class specifications are less compact and more difficult to read when they
include implementations of member functions. Consequently, it is often
preferable to place member function implementations in a separate file.
However, including the implementation in the specification instructs
the compiler to inline the method (if possible). Since inlining short
functions can save both time and space, functions intended to be inlined
may appear in the class specification." [JOINT STRIKE FIGHTER]

This rule detects when the definition of a non-template function that
is not intended to be inline is placed inside a class specification.

See also: OPT-23, OPT-25



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

The rule assumes that a function is intended to be inline if it meets
the following conditions:
- It does not contain more than two statements (instructions ended with
  a semicolon).
- It does not contain any 'while', 'do-while' or 'for' loops, or 'goto'
  statements.



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

This rule helps you ensure better data hiding by separating the interface
from the implementation.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

In the following example, the definition of the 'f1' function that is not
intended to be inline is placed inside the specification of the class.

class A {
public:
    int f1 (int p) {      // Violation
        int i1;
        i1++;
        p = p + 1;
        return p + i1;
    }
};



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

To fix the code, define the 'f1' function outside the class specification.

class A {
public:
    int f1 (int p);       // OK
};

int A::f1 (int p) {       // OK
    int i1;
    i1++;
    p = p + 1;
    return p + i1;
}

// Examples of correct code

class A1 {
public:
// The 'f2' function has only 2 statements, so it is intended to be inline.
    int f2 (int p) {      // OK
        int i1;
        p = p + 1;        // statement
        return p + i1;    // statement
    }
// The 'f3' function has only 2 statements, so it is intended to be inline.
    int f3 (int p) {      // OK
        if(p &gt; 0){
            return 1;
        } else {
            return p;
        }
    }
};

template &lt;typename T&gt;
class AT {
public:
    int f4 (int p) {      // OK - a template function can be defined in a class
        int i1;
        i1++;
        p = p + 1;
        return p + i1;
    }
};



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. JOINT STRIKE FIGHTER, AIR VEHICLE, C++ CODING STANDARDS
   Chapter 4.13 Functions, AV Rule 109

2. AUTOSAR C++14 Coding Guidelines
   A3-1-5. A function definition shall only be placed in a class definition if
   (1) the function is intended to be inlined (2) it is a member function
   template (3) it is a member function of a class template

3. [Ellemtel 92] "Programming in C++: Rules and Recommendations"
   Ellemtel Telecommunication Systems Laboratories, Sweden.
   From: 6 Style  - 6.1 Classes - Rule 21

</PRE>
</BODY>
</HTML>
