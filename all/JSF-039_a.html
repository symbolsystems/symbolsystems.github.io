<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Header files (*.h) will not contain non-const variable definitions or function definitions [JSF-039_a]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Header files (*.h) will not contain non-const variable definitions or function definitions [JSF-039_a-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"Header files should be used to declare objects, functions, inline functions,
function templates, typedefs, macros, classes, and class templates and shall
not contain or produce definitions of objects or functions (or fragment of
functions or objects) that occupy storage."
See also: MISRA2004-8_5



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

As a headers rule detects files with extensions ".h", ".hh", ".hxx", ".i"
(e.g. "file.h", "file.hh", "file.hxx", "file.i").



</PRE>
<STRONG>
EXCEPTIONS
</STRONG>
<PRE>

The following definitions are allowed in a header file:
- inline functions
- function templates
- static data members of class templates
- const variables if they have internal or no linkage (C++ mode)
- static const variables
- inline variables



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Rule improves readability and maintainability.
By not having definitions in header files it's possible to 
include headers in multiple translation units.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

/* file.h */
void f1(){}            // Violation
int var;               // Violation
class C {
   void f2();
};
void C::f2() {}        // Violation

/* file.cpp */
#include "file.h"



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

/* file.h */
void f1();             // OK
extern int var;        // OK
class C {
   void f2();
};
template &lt;typename T&gt;
void f3 ( T ) { }      // OK

/* file.cpp */
#include "file.h"
void f1(){}
int var;
void C::f2() {}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. AUTOSAR C++14 Coding Guidelines
   A3-1-1. It shall be possible to include any header file in multiple
   translation units without violating the One Definition Rule

2. AUTOSAR C++14 Coding Guidelines
   A3-3-1. Objects or functions with external linkage (including members of
   named namespaces) shall be declared in a header file

3. Herb Sutter, Andrei Alexandrescu, "C++ Coding Standards," Addison-Wesley, 
   (C) 2005 Pearson Education, Inc.
   Chapter: "Namespaces and Modules", Rule 61

4. JOINT STRIKE FIGHTER, AIR VEHICLE, C++ CODING STANDARDS
   Chapter 4.7 Header Files, AV Rule 39

5. MISRA C++:2008 - Guidelines for the use of the C++ language in critical
   systems, Chapter 6, Section 3, Rule 3-1-1

6. MISRA C++:2023 Guidelines for the use of C++17 in critical systems
   Rule 6.2.4 A header file shall not contain definitions of functions or objects that are non-inline and have external linkage

</PRE>
</BODY>
</HTML>
