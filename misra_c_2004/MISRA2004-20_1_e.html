<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Do not #define nor #undef identifier 'defined' [MISRA2004-20_1_e]
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Do not #define nor #undef identifier 'defined' [MISRA2004-20_1_e-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"It is generally bad practice to #undef a macro which is defined in the 
standard library. It is also bad practice to #define a macro name which
is a C reserved identifier or C keyword which is the name of any macro,
object or function in the standard library.
For example, there are some specific reserved words and function names 
which are known to give rise to undefined behaviour if they are redefined or
undefined, including defined, _ _LINE_ _, _ _FILE_ _, _ _DATE_ _, _ _TIME_ _, 
_ _STDC_ _, errno and assert. Generally, all identifiers that begin with
the underscore character are reserved." [1]

This rule checks if the following reserved names are #define'd or #undef'ined:
- identifier 'defined'

See also: MISRA2004-20_1_a, MISRA2004-20_1_b, CODSTA-92, CODSTA-92_a,
          CODSTA-92_b  



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Rule prevents undefined behaviour.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

#define defined     // Violation
#undef defined      // Violation



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

// Example of code which do not result in a violation:
#define is_defined     // OK
#undef is_defined      // OK



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. AUTOSAR C++14 Coding Guidelines
   A17-0-1. Reserved identifiers, macros and functions in the C++ standard
   library shall not be defined, redefined or undefined

2. MISRA C++:2008 Guidelines for the use of the C++ language in critical
   systems, Chapter 6, Section 17, Rule 17-0-1

3. MISRA C:2012 Guidelines for the use of the C language in critical systems
   Section 8: Rules, Rule 21.1

4. MISRA-C:2004 Guidelines for the use of the C language in critical systems
   Chapter 6, Section 20

5. Origin: Misra Guidelines - Rule 114

6. SEI CERT C++ Coding Standard
   DCL51-CPP. Do not declare or define a reserved identifier
   <A HREF="https://wiki.sei.cmu.edu/confluence/display/cplusplus/DCL51-CPP.+Do+not+declare+or+define+a+reserved+identifier">https://wiki.sei.cmu.edu/confluence/display/cplusplus/DCL51-CPP.+Do+not+declare+or+define+a+reserved+identifier</A>

</PRE>
</BODY>
</HTML>
